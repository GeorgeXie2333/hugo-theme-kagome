{{/* markup */}}
{{ if and (eq .Kind "page") .Params.markup }}
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
{{ end }}

{{/* aplery */}}
{{ if and (eq .Kind "page") .Params.aplayer }}
<link rel="stylesheet" href="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.css">
<script type="text/javascript" src="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script type="text/javascript">
  const aplayer = document.querySelectorAll(".aplayer-box");
  aplayer && initaplayer(aplayer);
  function initaplayer(els) {
    let elsArr = Array.from(els);
    elsArr.forEach(el => {
      let params = { container: el, audio: { ...el.dataset } }
      let config = {{- $.Site.Params.aplayer }}
      if (config) {
        params = Object.assign(params, config)
      }
      if (el.dataset.lrcType) {
        params['lrcType'] = Number(el.dataset.lrcType)
      }
      new APlayer(params);
    });
  }
</script>
{{ end }}

{{/* dplayer */}}
{{ if and (eq .Kind "page") .Params.dplayer }}
<script type="text/javascript" src="https://unpkg.com/hls.js@1.0.1/dist/hls.js"></script>
<script type="text/javascript" src="https://unpkg.com/dplayer@1.25.1/dist/DPlayer.min.js"></script>
<script type="text/javascript">
  const dplayer = document.querySelectorAll(".dplayer-box");
  dplayer && initDPlayer(dplayer);
  function initDPlayer(els) {
    let elsArr = Array.from(els);
    elsArr.forEach(el => {
      let subtitle = el.dataset.subtitle;
      let params = { container: el, video: { ...el.dataset } }
      let config = {{- $.Site.Params.dplayer }}
      if (config) {
        params = Object.assign(params, config)
      }
      new DPlayer(params);
    });
  }
</script>
{{ end }}